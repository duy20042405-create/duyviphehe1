<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Duyviphehe1</title>
  <style>
    :root { --bg:#0b0d12; --card:#151924; --text:#e8ecf1; --muted:#9aa4b2; --accent:#6ae3ff; }
    *{box-sizing:border-box} html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    body{background:radial-gradient(1200px 600px at 50% -10%,#1b2130 0%, var(--bg) 60%);color:var(--text);display:flex;align-items:center;justify-content:center;padding:24px}
    .card{width:min(680px,92vw);background:linear-gradient(180deg,#1b2231,#121722);border:1px solid rgba(255,255,255,.06);border-radius:20px;box-shadow:0 10px 40px rgba(0,0,0,.45);padding:22px 22px 18px}
    h1,h2{margin:8px 0 4px} p{color:var(--muted);margin:0 0 14px}
    .row{display:flex;gap:12px;align-items:center}
    input[type="text"]{flex:1;padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.09);background:#0f1420;color:var(--text);outline:none;font-size:16px}
    input::placeholder{color:#6b7686}
    button{padding:12px 16px;border-radius:12px;border:0;cursor:pointer;font-weight:600;font-size:15px;color:#08131a;background:var(--accent);box-shadow:0 6px 24px rgba(106,227,255,.25)}
    button.secondary{background:#232a3a;color:var(--text);box-shadow:none;border:1px solid rgba(255,255,255,.08)}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .hide{display:none!important} .hint{font-size:13px;color:#8d99a8}
    .video-wrap{position:relative;border-radius:16px;overflow:hidden;border:1px solid rgba(255,255,255,.08);background:#000}
    video{width:100%;height:auto;display:block;background:#000}
    .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
    .name-chip{font-size:13px;color:#bcd1ff;background:rgba(105,150,255,.12);border:1px solid rgba(105,150,255,.25);padding:6px 10px;border-radius:999px}
    .warn{color:#ffb4b4;font-size:13px;margin-top:6px}
  </style>
</head>
<body>
  <main class="card">
    <!-- B∆∞·ªõc 1 -->
    <section id="step1">
      <h1>üëã T√™n c·ªßa b·∫°n l√† g√¨?</h1>
      <p>Nh·∫≠p t√™n ƒë·ªÉ ti·∫øp t·ª•c.</p>
      <div class="row" style="margin-top:12px">
        <input id="nameInput" type="text" placeholder="V√≠ d·ª•: Duy" maxlength="40" autocomplete="name" />
        <button id="toStep2">G·ª≠i</button>
      </div>
      <div id="nameWarn" class="warn hide">T√™n c·∫ßn √≠t nh·∫•t 1 k√Ω t·ª± (kh√¥ng ch·ªâ kho·∫£ng tr·∫Øng).</div>
      <p class="hint" style="margin-top:10px">M·∫πo: b·∫≠t √¢m thanh/ƒëeo tai nghe nh√©.</p>
    </section>

    <!-- B∆∞·ªõc 2 -->
    <section id="step2" class="hide">
      <div class="topbar">
        <h2>Gi·ªõi t√≠nh c·ªßa b·∫°n l√† g√¨?</h2>
        <div id="chip" class="name-chip"></div>
      </div>
      <div class="grid" style="margin-top:12px">
        <button id="pickMale">Nam</button>
        <button id="pickFemale">N·ªØ</button>
      </div>
      <p class="hint" style="margin-top:10px">Ch·ªçn xong, video s·∫Ω ph√°t ngay (c√≥ ti·∫øng).</p>
    </section>

    <!-- B∆∞·ªõc 3 -->
    <section id="step3" class="hide">
      <div class="topbar">
        <h2 id="titlePlay">ƒêang ph√°t video‚Ä¶</h2>
        <div id="chip2" class="name-chip"></div>
      </div>
      <div class="video-wrap">
        <video id="theVideo" playsinline controls preload="metadata"></video>
      </div>
      <div class="row" style="margin-top:12px;justify-content:space-between">
        <button class="secondary" id="replayBtn">Ph√°t l·∫°i</button>
        <button class="secondary" id="resetBtn">L√†m l·∫°i t·ª´ ƒë·∫ßu</button>
      </div>
      <p class="hint" style="margin-top:10px">N·∫øu kh√¥ng nghe ti·∫øng, ch·∫°m v√†o video 1 l·∫ßn r·ªìi b·∫•m ‚ñ∂.</p>
    </section>
  </main>

  <script>
    const $ = id => document.getElementById(id);
    const step1 = $('step1'), step2 = $('step2'), step3 = $('step3');
    const nameInput = $('nameInput'), toStep2 = $('toStep2'), nameWarn = $('nameWarn');
    const chip = $('chip'), chip2 = $('chip2');
    const pickMale = $('pickMale'), pickFemale = $('pickFemale');
    const theVideo = $('theVideo'), replayBtn = $('replayBtn'), resetBtn = $('resetBtn'), titlePlay = $('titlePlay');

    // Hi·ªán t·∫°i d√πng chung 1 video cho c·∫£ hai l·ª±a ch·ªçn
    const VIDEO_SRC = {
      nam: 'video_nam.mp4',
      nu:  'video_nam.mp4' // sau n√†y ƒë·ªïi th√†nh 'video_nu.mp4'
    };

    function show(section){ [step1,step2,step3].forEach(s=>s.classList.add('hide')); section.classList.remove('hide'); }
    function goStep2(){
      const name = (nameInput.value||'').trim();
      if(!name){ nameWarn.classList.remove('hide'); return; }
      nameWarn.classList.add('hide'); chip.textContent = `üë§ ${name}`; show(step2);
    }
    toStep2.addEventListener('click', goStep2);
    nameInput.addEventListener('keydown', e => { if(e.key==='Enter') goStep2(); });

    async function pickGender(g){
      const name = (nameInput.value||'').trim();
      chip2.textContent = `üë§ ${name}`; titlePlay.textContent = `Xin ch√†o ${name}! ƒêang ph√°t video‚Ä¶`;
      const src = VIDEO_SRC[g];

      theVideo.pause(); theVideo.removeAttribute('src'); theVideo.load();
      theVideo.src = src; theVideo.load();
      show(step3);
      try{ await theVideo.play(); }catch(e){ console.warn('Autoplay b·ªã ch·∫∑n:', e); }
    }
    pickMale.addEventListener('click', ()=>pickGender('nam'));
    pickFemale.addEventListener('click', ()=>pickGender('nu'));

    replayBtn.addEventListener('click', async ()=>{ try{ theVideo.currentTime=0; await theVideo.play(); }catch(e){} });
    resetBtn.addEventListener('click', ()=>{ theVideo.pause(); theVideo.removeAttribute('src'); theVideo.load(); nameInput.value=''; show(step1); });
  </script>
</body>
</html>
